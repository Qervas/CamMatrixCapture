<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="CameraMatrixCapture.Pages.ConnectPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CameraMatrixCapture.Pages">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Cameras Card -->
        <Border Grid.Column="0" Margin="0,0,16,0" CornerRadius="8"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" Padding="24">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                    <FontIcon Glyph="&#xE722;" FontSize="32" Foreground="{StaticResource AccentBrush}"/>
                    <TextBlock Text="Cameras" FontSize="24" FontWeight="SemiBold" Margin="16,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Status -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <Ellipse x:Name="CameraStatusDot" Width="12" Height="12" Fill="Gray"/>
                    <TextBlock x:Name="CameraStatusText" Text="Not connected" Margin="8,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Camera count -->
                <TextBlock x:Name="CameraCountText" Text="0 / 12 cameras" FontSize="28" FontWeight="Bold" Margin="0,0,0,8"/>

                <!-- Camera list -->
                <ListView x:Name="CameraListView" MaxHeight="180" Margin="0,0,0,8"
                          Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                          CornerRadius="4"
                          CanReorderItems="True" AllowDrop="True"
                          ReorderMode="Enabled">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="4,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Ellipse Grid.Column="0" Width="8" Height="8" Fill="{Binding StatusColor}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                <TextBlock Grid.Column="1" Text="{Binding DisplayName}" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Grid.Column="2" Text="{Binding SerialNumber}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center" FontSize="12" Margin="8,0,0,0"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <!-- Discover button -->
                <Button x:Name="DiscoverButton" Content="Discover Cameras" HorizontalAlignment="Stretch" Height="40" Click="DiscoverButton_Click"/>

                <!-- Connect button -->
                <Button x:Name="ConnectCamerasButton" Content="Connect All" HorizontalAlignment="Stretch" Height="40" Margin="0,8,0,0"
                        Style="{StaticResource AccentButtonStyle}" IsEnabled="False" Click="ConnectCamerasButton_Click"/>

                <!-- Progress -->
                <ProgressBar x:Name="CameraProgressBar" Margin="0,16,0,0" IsIndeterminate="False" Visibility="Collapsed"/>
            </StackPanel>
        </Border>

        <!-- Turntable Card -->
        <Border Grid.Column="1" Margin="16,0,0,0" CornerRadius="8"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1" Padding="24">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                    <FontIcon Glyph="&#xE895;" FontSize="32" Foreground="{StaticResource AccentBrush}"/>
                    <TextBlock Text="Turntable" FontSize="24" FontWeight="SemiBold" Margin="16,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Status -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                    <Ellipse x:Name="TurntableStatusDot" Width="12" Height="12" Fill="Gray"/>
                    <TextBlock x:Name="TurntableStatusText" Text="Not connected" Margin="8,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Device name -->
                <TextBlock x:Name="TurntableNameText" Text="No device" FontSize="20" Margin="0,0,0,24"/>

                <!-- Scan button -->
                <Button x:Name="ScanButton" Content="Scan for Devices" HorizontalAlignment="Stretch" Height="40" Click="ScanButton_Click"/>

                <!-- Device list -->
                <ListView x:Name="DeviceListView" MaxHeight="150" Margin="0,8,0,0" SelectionChanged="DeviceListView_SelectionChanged">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}"/>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <!-- Connect button -->
                <Button x:Name="ConnectTurntableButton" Content="Connect" HorizontalAlignment="Stretch" Height="40" Margin="0,8,0,0"
                        Style="{StaticResource AccentButtonStyle}" IsEnabled="False" Click="ConnectTurntableButton_Click"/>

                <!-- Progress -->
                <ProgressBar x:Name="TurntableProgressBar" Margin="0,16,0,0" IsIndeterminate="False" Visibility="Collapsed"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
